language: node_js
node_js: '8'

before_install:
- npm install -g npm@latest

install:
- npm install
- npm install -g resume-cli
- npm install -g @percy/agent

script:
- npm run build:styles
- resume serve --resume=example-resume.json --port 5001 --silent &
- sleep 2s
- mkdir resume
- curl http://localhost:5001 > resume/example-resume.html
- percy snapshot resume

deploy:
  provider: npm
  email: npm@xuluwarrior.org
  api_key:
    secure: QhoVL9RenyubyQU2AXhNoyzftwB/dvEwHoySKJ/XAvsVLSkNSvZWXIedE1Qpn1D0O5yq/z4qeJAAt7VakAbhz32jVi7k+TLxy/PDCSZ1D97tpOa6QjvaPfZAczZY8mQyMePJ1fniFHBqGH1t/0LSPqmEcOEsYA3LNjyq2Be9otjFInp7O/h1BiIPsU0X5DcNtMXNrriSY2SPNG5mQ4BBKeUXHUJ7+21HoQ61u9d7mLXEYEuKhBMCLSEfTxgD2CWj1dnweC8JuV3hWUaAtDPp+iioWgLTo4EKvjn+RqMnR20QbhUwNJhTki/WxpbxDMeGdiyH+zJ733TDk+Gh0RhON6GyAd02h4a+Mz68UuY2/DayxAmQslPImGFx9k+HeKneYmoRZItTyhq3PEhAlOInlVP5fueQDlg8TbzzhdVr6XQyIyokdAdq+3mh70MsmPh8uxd6L0fy8D8xEu/nQZbT9L2+fKGwn9GwphJnaRjQoRgaxO52BSUZKNuiWR93hq3EVXFERiP9Wih+VRUQYFL56Rr6A+byW5Nc8cba5O+4SeBb6LbAql2Yyd/2gFYjBQ26JwTNnL6d98A8epTUPtDN89ulU4bDwj8KPxyyPykYERRUDVpTKkv0Y4OZJDIAipnUfPw04z+Adue+pHSZx8h0kR3SnjPH8hTobjwtMda1Bb8=
  on:
    tags: true
    repo: XuluWarrior/jsonresume-theme-orbit

env:
  secure: vYKY/PUSNRvJpfvJDHcOBPdIJZzcS2hB0eXeJgRK4o9f7C8AP2WWrmh3GBX0BBnTH68WjyW2a9oo3dnV8C2umqWHFrTkV5UXU07v53P68kaUSdaXBKg/AWxOjfmI+LCQFpzAh2Q4PQIuPzAyQ6YLwE1F+L+vTf1Q3Z7pJyMFSWhdxwitMm7Xq281PlO3x1MP16UsWNJlZPfnXOKIwgh2qxxVohuYwQ/cvJrjhrV3YWx00mJaz/rgmwQz0wDnpCUofotCeAF1ZJnZquQnrE0PDIUgYUCIBumHlcvgZWxQVjfzpPbJghEkUxVKt1y+nmTEi3mxa9Homt6heViGZ9XrVlYs1+jX86pBrqoI8rAyOmndmqHPqkIqtGwjb8ZqsPwPZrNr6OCLmZgsyyW4J+FKrbumWQKEXAMMJ/fc1q1NO8D6UD90VEfUxiNM8zHFnlzz1pFMRKW3eFviXpoi8DpmK7bpaJUW2pjkvXbEIb+ncUnBCrsRt6hXsc2umMkhENFtPKsoK7y1PpLClaPj7eyDkEXL7ZxZ/ZuHg8eIo9FJb1elvHsQJQrQRm0bKeVPt7xCmFEJm6EEQhJ/hJ44HtUu0HRCfUkF5WwJ8vT00rKdeHTJHvLL/Z/QITguAvVT5Bh1TW0KWdwcg1SRfUwf5RqmGFcnUFC3SXBlBmu6C9iWuHc=
